module Test where

import Daml.Script

import DA.Optional.Total

import Main

-- assumes the existence of the party 'owner'
-- `daml ledger allocate-parties --host "$HOST" --port "$PORT" owner`
run : Int -> Script ()
run loops = do
  owner <- fromSome $ partyFromText "owner"
  fib <- submit owner do
    createCmd InefficientFibonacci with
      owner = owner
  submit owner do
    exerciseCmd fib InefficientFibonacciCompute with
      n = loops
  pure ()
